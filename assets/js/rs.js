


// function json2dict (filepath){
//     var xmlhttp = new XMLHttpRequest();
     
//     var dict = 1
//     xmlhttp.onreadystatechange = function() {
//     if (this.readyState == 4 && this.status == 200) {
//         // 将 JSON 数据解析为字典
//         var myObj = JSON.parse(this.responseText);
//         // 在控制台打印字典
//         dict = myObj
//         console.log(myObj);
//     }
//     };

//     // 打开文件并发送请求
//     xmlhttp.open("GET", "file.json", true);
//     xmlhttp.send();
//     return myObj
// }
// console.log("dict here")

// rcmd= json2dict("../forFrontEnd.json")
// console.log("dict here")
// console.log(rcmd)
// rcmd = {"cid1":{
//     "boughtAids":["0657719012","0657719010"],
//     "rcmdAids": ["0425529003","0487937002","0487937003"]
//     // "prdct_name":["a1","a20,"]
// },
//         "cid2":{
//             "boughtAids":["0425529003","0487937002","0487937003"],
//             "rcmdAids": ["0657719012","0657719010"]
// }
// }
rcmd = {
    "04c7dc2c017220fc7cc659fc2b1c32c8673917670d5b8ab0c5994b845a1add5e": {
      "boughtAids": [
        "0690545002",
        "0884319001",
        "0884319006"
      ],
      "boughtProdName": [
        "Smith chelsea",
        "Lucien CONSCIOUS",
        "Lucien CONSCIOUS"
      ],
      "prodName": [
        "Celeste",
        "Strong seamless v-neck bralett",
        "Tina Blouse",
        "MARTIN REGULAR MANDARIN.",
        "Jade HW Skinny Denim TRS",
        "SPEED BRUNO  SHIRT",
        "Biker shorts rib",
        "V-neck strap top 2-pack",
        "Avignon(1)",
        "Tina 2pk removable",
        "Titan Playsuit.",
        "Megan buckle boot"
      ],
      "rcmdAids": [
        "0842755001",
        "0868823007",
        "0889460003",
        "0637411013",
        "0706016062",
        "0871710001",
        "0932798001",
        "0910132001",
        "0835008011",
        "0694220007",
        "0906635001",
        "0877389002"
      ]
    },
    "2282b1009c7fb1545fb183a632657d3ee74e5b735d7069e3c2c3009a79d3d36a": {
      "boughtAids": [
        "0673677023",
        "0673677002",
        "0687704001",
        "0621381016",
        "0556539016",
        "0556539030",
        "0791033010"
      ],
      "boughtProdName": [
        "Henry polo (1)",
        "Henry polo. (1)",
        "Embrace S.Skinny Ankle H.W",
        "Jade Trash HW Skinny Denim TRS",
        "Velvet scrunchie",
        "Velvet scrunchie",
        "Disa jacket"
      ],
      "prodName": [
        "PQ ALMU WOOL COAT",
        "Bali PU",
        "Strong seamless v-neck bralett",
        "Jade HW Skinny Denim TRS",
        "SPEED BRUNO  SHIRT",
        "STRONG HW seamless tights",
        "Ellen 2pk ct rio wireless",
        "Biker shorts rib",
        "Basket coat",
        "V-neck strap top 2-pack",
        "Avignon(1)",
        "Jacket Oversize"
      ],
      "rcmdAids": [
        "0811943001",
        "0907188001",
        "0868823007",
        "0706016062",
        "0871710001",
        "0918292011",
        "0694848001",
        "0932798001",
        "0869706005",
        "0910132001",
        "0835008011",
        "0797835009"
      ]
    },
    "4cb2040f35d9d859b799fecef82794290077e859010edc3c415bcf15eac11e35": {
      "boughtAids": [
        "0882925004",
        "0704754001",
        "0868064002",
        "0608943015"
      ],
      "boughtProdName": [
        "Tora",
        "Ellen 3p tanga thong LR",
        "SKylar shorts",
        "MATTEO PIQUE SHORTS."
      ],
      "prodName": [
        "Sally Structure TVP",
        "Strong seamless v-neck bralett",
        "SPEED BRUNO  SHIRT",
        "Mist Loose Tank",
        "Jade HW Skinny Denim TRS",
        "Biker shorts rib",
        "V-neck strap top 2-pack",
        "Avignon(1)",
        "Titan Playsuit.",
        "Jennifer Top",
        "Bounce cropped tee conscious",
        "Essential Yucca LS"
      ],
      "rcmdAids": [
        "0516903025",
        "0868823007",
        "0871710001",
        "0851094009",
        "0706016062",
        "0932798001",
        "0910132001",
        "0835008011",
        "0906635001",
        "0716672001",
        "0924605001",
        "0936282001"
      ]
    },
    "56ac0602775a8157205271bd737e4f9cb6849bd591cc2fc1175ad90aa8696bd2": {
      "boughtAids": [
        "0717490081",
        "0869397001",
        "0944506001",
        "0736923003",
        "0758027001",
        "0917300002",
        "0810557003",
        "0917300005",
        "0909924002",
        "0917296002",
        "0917296005"
      ],
      "boughtProdName": [
        "Cat Tee.",
        "SF PI Carmen dress",
        "LW (J) Mahalia Hoodi conscious",
        "Dusk Padded T-shirt",
        "Marielle Top",
        "BLANKS KENT REGULAR JOGGER",
        "Orlando C&S Push",
        "BLANKS KENT REGULAR JOGGER",
        "Mahalia Jogger (J)",
        "BLANKS JIM OVERSIZED SWEATER",
        "BLANKS JIM OVERSIZED SWEATER"
      ],
      "prodName": [
        "BLANKS JACOB RELAXED SS TEE",
        "Strong seamless v-neck bralett",
        "Tina Blouse",
        "Jade HW Skinny Denim TRS",
        "Charlie A-Line Skirt",
        "Vintage Slim HW ankle consc.",
        "Biker shorts rib",
        "V-neck strap top 2-pack",
        "Avignon(1)",
        "Amaryllis Blanket",
        "Titan Playsuit.",
        "Queen Sweater"
      ],
      "rcmdAids": [
        "0917293003",
        "0868823007",
        "0889460003",
        "0706016062",
        "0804612001",
        "0799365015",
        "0932798001",
        "0910132001",
        "0835008011",
        "0757964001",
        "0906635001",
        "0677930037"
      ]
    },
    "5792db97ed0ee48ccc4ef8ed63abb863c53cd3c6a07bf8bfbb0a8e8d77a9ddf4": {
      "boughtAids": [
        "0861685002",
        "0865240002"
      ],
      "boughtProdName": [
        "Flirty Sidney hoop",
        "Flirty Silja earcuff"
      ],
      "prodName": [
        "Strong seamless v-neck bralett",
        "SPEED BRUNO  SHIRT",
        "Jade HW Skinny Denim TRS",
        "Flirty Boris Hoop",
        "Skinny 5pkt Midprice",
        "Glitz shirt",
        "Biker shorts rib",
        "V-neck strap top 2-pack",
        "Avignon(1)",
        "Titan Playsuit.",
        "Classic Necklace SS Phone case",
        "Ringo hipbelt"
      ],
      "rcmdAids": [
        "0868823007",
        "0871710001",
        "0706016062",
        "0795991002",
        "0730863039",
        "0852910001",
        "0932798001",
        "0910132001",
        "0835008011",
        "0906635001",
        "0873045001",
        "0673396015"
      ]
    },
    "6163f2e5c143d0b047c720c692321421cc47f248e6304f631db5bd562cae9e77": {
      "boughtAids": [
        "0857227001"
      ],
      "boughtProdName": [
        "Cambridge dress"
      ],
      "prodName": [
        "LOGG Citrine dress",
        "Strong seamless v-neck bralett",
        "SPEED BRUNO  SHIRT",
        "Rio FU",
        "Jade HW Skinny Denim TRS",
        "Biker shorts rib",
        "V-neck strap top 2-pack",
        "Avignon(1)",
        "Meringue",
        "Titan Playsuit.",
        "PUTTE overall",
        "Mac Jumpsuit V1"
      ],
      "rcmdAids": [
        "0874465006",
        "0868823007",
        "0871710001",
        "0890511003",
        "0706016062",
        "0932798001",
        "0910132001",
        "0835008011",
        "0861558002",
        "0906635001",
        "0750481004",
        "0916235002"
      ]
    },
    "6de80306b5fd9c3187558d4c218e96ab6e1dff383336ef7c8a5049e39b8b45b7": {
      "boughtAids": [
        "0868405002",
        "0399136061",
        "0854663005",
        "0757303021",
        "0803727001",
        "0882882002",
        "0873764003",
        "0794321007",
        "0849886012"
      ],
      "boughtProdName": [
        "Dexter crop tanktop conscious",
        "Shaping Skinny R.W.",
        "Energy rib fitted tanktop",
        "Honey seamless bra",
        "FLASHDANCE anorak",
        "Push Up Jeggings LW",
        "Epic v-neck bikini top",
        "SULIMA  jkt",
        "Acai seamless bra CONSCIOUS"
      ],
      "prodName": [
        "Slim 5pkt Lowprice",
        "Bali PU",
        "Strong seamless v-neck bralett",
        "Tina Blouse",
        "Jade HW Skinny Denim TRS",
        "STRONG HW seamless tights",
        "Shirt SS Bermuda 79",
        "Fusili",
        "Biker shorts rib",
        "SUPREME BASIC tights",
        "V-neck strap top 2-pack",
        "Avignon(1)"
      ],
      "rcmdAids": [
        "0636207010",
        "0907188001",
        "0868823007",
        "0889460003",
        "0706016062",
        "0918292011",
        "0839153001",
        "0734287001",
        "0932798001",
        "0889816001",
        "0910132001",
        "0835008011"
      ]
    },
    "a4b93bff4e8e9ef0cdf2de10a20d8042e3d0fd53573e94dc50101ff618614822": {
      "boughtAids": [
        "0898573003",
        "0706016062",
        "0706016002",
        "0878190003",
        "0893432002",
        "0916256001"
      ],
      "boughtProdName": [
        "Venice",
        "Jade HW Skinny Denim TRS",
        "Jade HW Skinny Denim TRS",
        "Pete shacket",
        "La Paz Heavy",
        "Patsy Platform N"
      ],
      "prodName": [
        "Shelf pile jacket",
        "Sally Structure TVP",
        "Strong seamless v-neck bralett",
        "SPEED BRUNO  SHIRT",
        "Tina Blouse",
        "LOGG Stevie ls top",
        "Biker shorts rib",
        "V-neck strap top 2-pack",
        "Avignon(1)",
        "Titan Playsuit.",
        "Queen Sweater",
        "Shaping Skinny HW"
      ],
      "rcmdAids": [
        "0899122001",
        "0516903025",
        "0868823007",
        "0871710001",
        "0889460003",
        "0876857004",
        "0932798001",
        "0910132001",
        "0835008011",
        "0906635001",
        "0677930037",
        "0881111008"
      ]
    },
    "b6bf9dd8932aa1e157e99fa8373bdbd1081e46eab49c4e31a9dca8e3b8fb4876": {
      "boughtAids": [
        "0594987024"
      ],
      "boughtProdName": [
        "Fiona Bikini (Clover) 4pk"
      ],
      "prodName": [
        "Thyme Blouse",
        "Strong seamless v-neck bralett",
        "SPEED BRUNO  SHIRT",
        "Tina Blouse",
        "Ted lace up sweater",
        "Sorrento cardigan",
        "Biker shorts rib",
        "V-neck strap top 2-pack",
        "Avignon(1)",
        "Becka hoodie",
        "Fred shorties 5-p",
        "Titan Playsuit."
      ],
      "rcmdAids": [
        "0741115004",
        "0868823007",
        "0871710001",
        "0889460003",
        "0577477003",
        "0855303003",
        "0932798001",
        "0910132001",
        "0835008011",
        "0715624008",
        "0752689002",
        "0906635001"
      ]
    },
    "e354f543baa0923a2fd7891513b1677b4dd64413fd058cc0a7e9f9d81b87a87c": {
      "boughtAids": [
        "0918894001",
        "0933891001",
        "0917606001",
        "0877599001"
      ],
      "boughtProdName": [
        "Anakin body",
        "Loose Straight Campaign",
        "Loose Mom Ultra HW Consc.(1)",
        "Jess 2 pack frill shorts (J)"
      ],
      "prodName": [
        "Bali PU",
        "Strong seamless v-neck bralett",
        "SPEED BRUNO  SHIRT",
        "Jade HW Skinny Denim TRS",
        "PQ SAZ TENCEL MIX DRESS",
        "STRONG HW seamless tights",
        "Biker shorts rib",
        "Eleonor button dress",
        "V-neck strap top 2-pack",
        "Avignon(1)",
        "MC Dorsia dress",
        "ROHANA knit frill dress"
      ],
      "rcmdAids": [
        "0907188001",
        "0868823007",
        "0871710001",
        "0706016062",
        "0863806002",
        "0918292011",
        "0932798001",
        "0880839003",
        "0910132001",
        "0835008011",
        "0918194002",
        "0909498001"
      ]
    }
  }
function getCopyArticle(){
    copyedArticle = document.querySelector("article.template").cloneNode(true);
    copyedArticle.classList.remove("template");
    return copyedArticle;
 }

function getCopyOption(){
    copylable = document.querySelector("option.template").cloneNode(true);
    copylable.classList.remove("template");
    return copylable;
}
// insert information
function changeRcmdImgs(cid){
    // dict get
    let rcmdAids = rcmd[cid]["rcmdAids"];
    let aidNames = rcmd[cid]["prodName"];

    // console.log("rcmd aids", rcmdAids)

    //html get
    rcmd_obj = document.querySelectorAll("#rcmdAids>article")

// 暂时只改图片
    for (let i = 0; i<rcmdAids.length;i++){
        imgPath = "images/"+rcmdAids[i]+".jpg"
        rcmd_obj[i].querySelector("img").src = imgPath
        rcmd_obj[i].querySelector("h2").innerHTML = aidNames[i]

    }


}


function changeBoughtImgs(cid){
    boughtStr = '<article class="style2"><span class="image"><img src="images/pic02.jpg" alt="" /></span><a href="generic.html"><h2>Lorem</h2><div class="content"><p>Sed nisl arcu euismod sit amet nisi lorem etiam dolor veroeros et feugiat.</p></div></a></article>'
    
    let boughtAids = rcmd[cid]["boughtAids"]
    let aidNames = rcmd[cid]["boughtProdName"]
    let lenOfBoughtItem = boughtAids.length

    boughtAidsDOM = document.querySelector("#boughtAids")

    //清除所有子元素
    while (boughtAidsDOM.firstChild) {
        boughtAidsDOM.removeChild(boughtAidsDOM.firstChild);
    }

//添加子元素
    for (let i = 0;i< lenOfBoughtItem;i++){
        boughtDOM = getCopyArticle()

        // console.log(boughtDOM)
        boughtDOM.querySelector("img").src =  "images/"+boughtAids[i]+".jpg"
        boughtDOM.querySelector("h2").innerHTML = aidNames[i]


        boughtAidsDOM.appendChild(boughtDOM)

    }

}

// 设置label
selectBar = document.querySelector("select");

lenCids = Object.keys(rcmd).length;

for (let i = 0;i <lenCids;i++){
    cid = Object.keys(rcmd)[i];
    copiedOption = getCopyOption();
    copiedOption.value = cid ;
    copiedOption.innerHTML = "User "+i;
    selectBar.appendChild(copiedOption);

}


//触发修改

selectBar.addEventListener("change", function() {
    //去掉提示项目
    hintElement = document.querySelector("option[value='hint']");
    if (!hintElement.classList.contains('dead')) {
        hintElement.classList.add('dead');
      }

  var cid = this.value;
    changeRcmdImgs(cid);
    changeBoughtImgs(cid);
});

